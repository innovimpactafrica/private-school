<div class="flex min-h-screen bg-[#EDF1F7]">
    <!-- Sidebar -->
    <app-sidebar></app-sidebar>

    <div class="flex-1 flex flex-col">
        <!-- Header -->
        <app-header></app-header>

        <main class="px-6 sm:p-8">
            <!-- Breadcrumb + Title -->
            <div class="flex items-start justify-between mb-6">
                <div class="flex items-center gap-3">
                    <button type="button" (click)="annuler()" aria-label="Retour"
                        class="inline-flex items-center justify-center p-5 rounded-lg bg-white border border-gray-200 hover:bg-gray-50">
                        <!-- Placeholder Back SVG -->
                        <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17 7H1M1 7L7 1M1 7L7 13" stroke="#2B3674" stroke-width="1.5"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                    <div>
                        <p class="text-sm text-gray-500">Gestion des utilisateurs / <span class="text-gray-700">{{
                                form.prenom }} {{ form.nom }}</span></p>
                        <h1 class="text-2xl font-semibold text-[#2B3674]">Modification</h1>
                    </div>
                </div>
            </div>

            <!-- Card -->
            <div class="bg-white rounded-xl shadow-sm">
                <div class="px-6 py-4 border-b border-gray-100">
                    <h2 class="text-2xl text-gray-800">Informations générales</h2>
                </div>

                <form class="p-6 space-y-6" (ngSubmit)="enregistrer()">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Prénom -->
                        <div>
                            <label class="block text-gray-700 mb-1">Prénom</label>
                            <div class="relative">
                                <!-- Placeholder user SVG -->
                                <input [(ngModel)]="form.prenom" name="prenom" type="text" placeholder="Abou"
                                    class="w-full text-sm py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:outline-none" />
                            </div>
                        </div>

                        <!-- Nom -->
                        <div>
                            <label class="block text-gray-700 mb-1">Nom</label>
                            <div class="relative">
                                <input [(ngModel)]="form.nom" name="nom" type="text" placeholder="Fall"
                                    class="w-full text-sm py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:outline-none" />
                            </div>
                        </div>

                        <!-- Email -->
                        <div>
                            <label class="block text-gray-700 mb-1">Email</label>
                            <div class="relative">
                                <input [(ngModel)]="form.email" name="email" type="email"
                                    placeholder="fallabou@gmail.com"
                                    class="w-full text-sm py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:outline-none" />
                            </div>
                        </div>

                        <!-- Téléphone -->
                        <div>
                            <label class="block text-gray-700 mb-1">Téléphone</label>
                            <div class="relative">
                                <input [(ngModel)]="form.telephone" name="telephone" type="tel"
                                    placeholder="77 000 00 00"
                                    class="w-full text-sm py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:outline-none" />
                            </div>
                        </div>

                        <!-- Adresse -->
                        <div>
                            <label class="block text-gray-700 mb-1">Adresse</label>
                            <div class="relative">
                                <input [(ngModel)]="form.adresse" name="adresse" type="text"
                                    placeholder="Ouakam rue 2, Dakar"
                                    class="w-full text-sm py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:outline-none" />
                            </div>
                        </div>

                        <!-- Rôle -->
                        <div>
                            <label class="block text-gray-700 mb-1">Rôle</label>
                            <div class="relative">
                                <select [(ngModel)]="form.role" name="role"
                                    class="w-full text-sm py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:outline-none appearance-none">
                                    <option value="Admin">Admin</option>
                                    <option value="Resp. Logistique">Responsable Logistique</option>
                                </select>
                                <!-- Placeholder chevron -->
                                <span class="absolute right-3 top-1/2 -translate-y-1/2">
                                    <svg width="15" height="9" viewBox="0 0 15 9" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1.77979 1.11841L7.77979 7.11841L13.7798 1.11841" stroke="#98A2B3"
                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center gap-4 pt-2 border-t border-gray-100 text-sm">
                        <button type="submit"
                            class="px-6 py-3 rounded bg-green-600 text-white hover:bg-green-700">Mettre à jour</button>
                        <button type="button" (click)="annuler()"
                            class="px-6 py-3 rounded bg-gray-100 text-gray-700 hover:bg-gray-200">Annuler</button>
                    </div>
                </form>
            </div>
        </main>
    </div>
</div>

<!-- Confirmation Modal -->
<div *ngIf="isConfirmOpen" class="fixed inset-0 z-50 flex items-center justify-center">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/30"></div>

    <!-- Dialog -->
    <div class="relative bg-white rounded-xl shadow-xl w-[560px] max-w-[92vw] p-8">
        <div class="flex flex-col items-center text-center gap-2">
            <!-- Placeholder alert circle -->
            <div class=" flex items-center justify-center py-2">
                <svg width="95" height="95" viewBox="0 0 95 95" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M51.2402 58.166L43.8184 58.166L43.8184 28.4785L51.2402 28.4785L51.2402 58.166Z"
                        fill="#EFBD8E" />
                    <path
                        d="M47.5 65.291C45.3685 65.291 43.6406 67.0189 43.6406 69.1504C43.6406 71.2819 45.3685 73.0098 47.5 73.0098C49.6315 73.0098 51.3594 71.2819 51.3594 69.1504C51.3594 67.0189 49.6315 65.291 47.5 65.291Z"
                        fill="#EFBD8E" />
                    <path
                        d="M47.5 94.9776C59.6972 95.3703 71.5436 90.595 80.446 81.6968C89.3483 72.7986 94.5815 60.5025 95 47.5C94.5815 34.4975 89.3483 22.2014 80.446 13.3032C71.5436 4.40504 59.6972 -0.370316 47.5 0.0224457C35.3028 -0.370316 23.4564 4.40504 14.554 13.3032C5.65166 22.2014 0.418472 34.4975 0 47.5C0.418472 60.5025 5.65166 72.7986 14.554 81.6968C23.4564 90.595 35.3028 95.3703 47.5 94.9776ZM47.5 7.93537C57.7293 7.54133 67.6886 11.4827 75.1994 18.8972C82.7101 26.3117 87.1609 36.5959 87.5781 47.5C87.1609 58.4041 82.7101 68.6883 75.1994 76.1028C67.6886 83.5174 57.7293 87.4587 47.5 87.0646C37.2707 87.4587 27.3114 83.5174 19.8006 76.1028C12.2899 68.6883 7.83908 58.4041 7.42188 47.5C7.83908 36.5959 12.2899 26.3117 19.8006 18.8972C27.3114 11.4827 37.2707 7.54133 47.5 7.93537Z"
                        fill="#EFBD8E" />
                </svg>
            </div>
            <h3 class="text-2xl text-gray-900">Confirmation</h3>
            <p class="text-lg text-gray-700">Souhaitez-vous <span class="font-semibold">modifier</span> cette
                utilisateur ?</p>
            <div class="mt-4 flex items-center gap-10">
                <button (click)="confirmUpdate()"
                    class="px-6 py-3 rounded-lg bg-green-600 text-white hover:bg-green-700">Oui,
                    modifier</button>
                <button (click)="closeConfirm()" class="text-red-500 hover:text-red-600">Non</button>
            </div>
        </div>
        <button (click)="closeConfirm()" aria-label="Fermer"
            class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
            <span class="sr-only">Fermer</span>
            <svg width="22" height="22" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 4L16 16M16 4L4 16" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
            </svg>
        </button>
    </div>
</div>

<!-- Success Modal -->
<div *ngIf="isSuccessOpen" class="fixed inset-0 z-50 flex items-center justify-center">
    <div class="absolute inset-0 bg-black/30"></div>
    <div class="relative bg-white rounded-2xl shadow-xl w-[560px] max-w-[92vw] p-8 text-center">
        <!-- Placeholder success check icon -->
        <div class="flex items-center justify-center py-4">
            <svg width="95" height="95" viewBox="0 0 95 95" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M70.2452 34.0264C70.9106 34.7294 71.27 35.6677 71.2443 36.6353C71.2186 37.6029 70.81 38.5208 70.1082 39.1875L43.3438 64.7644C42.6518 65.4153 41.736 65.7751 40.7861 65.7692C39.8501 65.7728 38.9494 65.4125 38.2741 64.7644L24.8918 51.976C24.5207 51.6521 24.2188 51.2566 24.0044 50.8131C23.79 50.3696 23.6675 49.8874 23.6442 49.3954C23.6209 48.9033 23.6973 48.4117 23.8689 47.9499C24.0405 47.4882 24.3037 47.0659 24.6426 46.7085C24.9816 46.3511 25.3893 46.0659 25.8413 45.87C26.2932 45.6742 26.7801 45.5718 27.2727 45.5689C27.7653 45.566 28.2534 45.6628 28.7076 45.8534C29.1618 46.044 29.5728 46.3244 29.9159 46.6779L40.7861 57.0457L65.0841 33.8894C65.7871 33.224 66.7254 32.8646 67.693 32.8903C68.6606 32.916 69.5785 33.3246 70.2452 34.0264ZM95 47.5C95 56.8946 92.2142 66.0782 86.9948 73.8896C81.7754 81.7009 74.357 87.7891 65.6775 91.3843C56.998 94.9794 47.4473 95.9201 38.2332 94.0873C29.0191 92.2545 20.5554 87.7305 13.9124 81.0876C7.26945 74.4446 2.74552 65.9809 0.91272 56.7668C-0.920077 47.5527 0.020581 38.002 3.61574 29.3225C7.2109 20.643 13.2991 13.2246 21.1104 8.00519C28.9218 2.78583 38.1054 0 47.5 0C60.0904 0.0241427 72.1582 5.03635 81.0609 13.9391C89.9637 22.8418 94.9759 34.9096 95 47.5ZM87.6923 47.5C87.6923 39.5507 85.3351 31.7799 80.9187 25.1703C76.5023 18.5608 70.2251 13.4092 62.8809 10.3671C55.5368 7.32509 47.4554 6.52915 39.6589 8.07997C31.8623 9.6308 24.7008 13.4587 19.0798 19.0797C13.4588 24.7007 9.63082 31.8623 8.08 39.6589C6.52917 47.4554 7.32511 55.5367 10.3672 62.8809C13.4092 70.2251 18.5608 76.5023 25.1704 80.9187C31.78 85.3351 39.5507 87.6923 47.5 87.6923C58.156 87.6802 68.372 83.4418 75.9069 75.9069C83.4418 68.372 87.6802 58.1559 87.6923 47.5Z"
                    fill="#4CAF50" />
            </svg>
        </div>
        <p class="mt-6 text-lg text-gray-900">
            L’utilisateur a été <span class="font-semibold">modifié</span> avec succès
        </p>
    </div>

</div>